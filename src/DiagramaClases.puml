@startuml
skinparam classAttributeIconSize 0

package "Dominio" {

  class Proyecto {
    -codigo : String
    -nombre : String
    -periodoInicio : String
    -duracionSemestres : int
    -estado : EstadoProyecto
    -numeroAyudantesPlanificados : int
    +cambiarEstado(nuevoEstado : EstadoProyecto) : void
    +esAprobado() : boolean
    +tieneAyudantesPlanificados() : boolean
  }

  enum EstadoProyecto {
    RECIBIDO
    EN_REVISION
    APROBADO
    NO_APROBADO
  }

  class Director {
    -identificacion : String
    -nombres : String
    -apellidos : String
    -correoInstitucional : String
    +registrarSeguimiento() : void
    +cerrarSeguimiento() : void
  }

  class JefaturaDICC {
    -identificacion : String
    -nombres : String
    -correoInstitucional : String
    +registrarProyecto() : void
    +registrarPlanificacion() : void
    +actualizarEstadoProyecto() : void
    +consultarTrazabilidad() : void
  }

  class ReporteAyudante {
    -id : String
    -periodoAcademico : String
    -estado : EstadoSeguimiento
    -fechaCreacion : Date
    -fechaCierre : Date
    +agregarParticipacion() : boolean
    +cerrar() : boolean
    +estaCompleto() : boolean
  }

  enum EstadoSeguimiento {
    SIN_REGISTRO
    EN_EDICION
    CERRADO
  }

  class Ayudante {
    -identificacion : String
    -nombres : String
    -apellidos : String
    -correoElectronico : String
    -rol : String
    -carrera : String
    -nivelAcademico : String
  }

  class Ayudantía {
    -fechaInicio : Date
    -fechaRetiro : Date
    -motivoRetiro : String
    -estado : EstadoParticipacion
    +esActivo() : boolean
    +registrarRetiro() : void
  }

  enum EstadoParticipacion {
    ACTIVO
    RETIRADO
  }

  class PeriodoAcademico {
    -codigo : String
    -nombre : String
    -fechaInicio : Date
    -fechaFin : Date
    -fechaLimiteRegistro : Date
    +esActivo() : boolean
    +diasRestantes() : int
  }

  class ResumenSeguimiento {
    -cantidadPlanificada : int
    -cantidadRegistrada : int
    -cantidadActivos : int
    -cantidadRetirados : int
    -cumplePlanificacion : boolean
    -periodo : String
  }


  class Notificacion {
    -tipo : String
    -destinatario : String
    -fechaEnvio : Date
    -contenido : String
    -estado : String
  }

  class AuditoriaSeguimiento {
    -tipoOperacion : String
    -usuarioEjecutor : String
    -fechaHora : Date
    -descripcion : String
    -entidadAfectada : String
  }
}

package "Servicios de Dominio" {

  interface IEvaluadorCumplimiento {
    +evaluar(seguimiento : ReporteAyudante) : ResumenSeguimiento
  }

  class EvaluadorCumplimientoAyudantía {
    +evaluar(seguimiento : ReporteAyudante) : ResumenSeguimiento
  }

  interface IGestorNotificaciones {
    +programarRecordatorios(periodo : PeriodoAcademico) : void
    +notificarDirectoresPendientes() : void
    +notificarCumplimientoTotal() : void
  }

  class GestorNotificacionesEmail {
    +programarRecordatorios(periodo : PeriodoAcademico) : void
    +notificarDirectoresPendientes() : void
    +notificarCumplimientoTotal() : void
  }

  interface IGeneradorReportes {
    +generarReporteTrazabilidad(proyecto : Proyecto) : Reporte
    +generarReporteParticipacion(periodo : PeriodoAcademico) : Reporte
  }

  class GeneradorReportesPDF {
    +generarReporteTrazabilidad(proyecto : Proyecto) : Reporte
    +generarReporteParticipacion(periodo : PeriodoAcademico) : Reporte
  }

  IEvaluadorCumplimiento <|.. EvaluadorCumplimientoAyudantía
  IGestorNotificaciones <|.. GestorNotificacionesEmail
  IGeneradorReportes <|.. GeneradorReportesPDF
}

' =====================
' RELACIONES DEL DOMINIO
' =====================

Proyecto "1" --> "1" Director : dirigidoPor
Proyecto "1" --> "0..*" ReporteAyudante : tiene
Proyecto --> EstadoProyecto

ReporteAyudante "1" *-- "1..*" Ayudantía : contiene
ReporteAyudante "1" --> "1" PeriodoAcademico : correspondeA
ReporteAyudante --> EstadoSeguimiento

Ayudantía "1" --> "1" Ayudante : referencia
Ayudantía --> EstadoParticipacion
Ayudantía "1" --> "0..*" AuditoriaSeguimiento : genera


Notificacion "0..*" --> "1" Director : notificaA
Notificacion "0..*" --> "1" JefaturaDICC : notificaA


JefaturaDICC "1" --> "0..*" PeriodoAcademico : configura

Director --> Ayudante : registra
Director --> Ayudantía : crea
Director --> ReporteAyudante : gestiona

JefaturaDICC --> Proyecto : registra

' =====================
' RELACIONES DE SERVICIOS
' =====================

EvaluadorCumplimientoAyudantía --> ReporteAyudante : evalúa
EvaluadorCumplimientoAyudantía --> ResumenSeguimiento : genera

GestorNotificacionesEmail --> Notificacion : crea
GestorNotificacionesEmail --> Director : notifica
GestorNotificacionesEmail --> PeriodoAcademico : consulta

GeneradorReportesPDF --> Proyecto : consulta
GeneradorReportesPDF --> ReporteAyudante : consulta
GeneradorReportesPDF --> Ayudantía : consulta

@enduml
